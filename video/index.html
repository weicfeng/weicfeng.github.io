<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <title>Test Page</title>
    <script type="text/javascript">
function logStateChange(text) {
  console.log(text);
  const log = document.getElementById('log');
  const newChild = document.createElement('p');
  newChild.append(text.toString());
  log.prepend(newChild);
}

function start() {
  logStateChange("Started");
  const videoTag = document.getElementById('video');
  logStateChange(videoTag.outerHTML);
  navigator.mediaDevices.getUserMedia({video:{"width":{"ideal":1280},"height":{"ideal":720},"advanced":[{"frameRate":{"min":30}},{"height":{"min":720}},{"width":{"min":1280}},{"frameRate":{"max":30}},{"width":{"max":1280}},{"height":{"max":720}},{"aspectRatio":{"exact":1.7777777777777777}}]}, audio : true,})
      .then((streams) => {
        logStateChange("Got streams");
        logStateChange(streams);
        videoTag.srcObject = streams;
      })
      .catch((error) => {
        logStateChange(error);
      });
}
document.addEventListener('DOMContentLoaded', start, false);
    </script>
  </head>
  <body>
    <video id="video" autoplay="true" style="width:100%"></video>
    <div id="log"></div>
</body></html>
